
function parseUrl(url){	
	if(typeof require!='undefined'){
		url=require('url').parse(url)
	}
	else{
		url=document.createElement('a')
		url.href=url
		url.path=url.pathname
	}	
	return url
}

/**
* Convert www.facebook.com -> www-facebook-com-host
*/
function createUrl(inurl,host){
	if (inurl.match(host)) return inurl
	inurl=parseUrl(inurl);	
	var result=inurl.protocol + '//' + inurl.host.replace(/-/g,'--').replace(/\./g,'-') + '.' + host + inurl.path
	return result
}

/**
* Convert  www-facebook-com-host -> www.facebook.com
*/
function resolveUrl(inurl,host){
	console.log('RESOLVED URL?')
	console.log(inurl)
	console.log(host)
	inurl=parseUrl(inurl);	
	console.log(inurl.host)
	console.log(inurl.host.match('.' + host))
	inurl.host=inurl.host.replace('.' + host,'').replace(/--/g,'@@').replace(/-/g,'.').replace(/@@/g,'-')
	var result= inurl.protocol + '//' + inurl.host + inurl.path	
	if(inurl.host.match(/facebook\.com/)) result+='?_fb_noscript=1';
	console.log('resolved',result)
	return result
}


if(typeof module!='undefined'){
	module.exports.createUrl=createUrl
	module.exports.resolveUrl=resolveUrl
}